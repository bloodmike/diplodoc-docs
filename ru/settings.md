# Настройки YFM-проекта

В зависимости от используемого инструмента вы можете задать стандартные настройки YFM-проекта одним из способов:
* в [файле конфигурации](./project/config.md);
* в качестве параметра функции ([Transformer](./tools/transform/settings.md));
* через ключи запуска ([Builder](./tools/docs/settings.md)).

{% note info %}

Обязательные параметры:

{% list tabs %}

- docs.yandex-team.ru

  ```
  docs-viewer:
    project-name: <project-name>
  ```

- yandex.ru/dev

  ```
  docs-viewer:
    project-name: dev-<project-name>
    is-external: true
    internal-s3: true
  ```

- yandex.ru/support2

  ```
  docs-viewer:
    project-name: support-<project-name>
    is-new-external: true
  ```

{% endlist %}

{% endnote %}

## Параметры сборки {#build}

#|
|| **Параметр** | **Описание** | **Тип** | **Значение по молчанию** ||
|| `allowHTML` | Разрешить использование HTML в разметке. | `bool` | `false` ||
|| `strict` | Cтрогий режим сборки, все предупреждения отображаются как ошибки. | `bool` | `false` ||
|| `breaks` | Переносить строки по символу перевода каретки. | `bool` | `true` ||
|| `singlePage` | Собирать однострачник из всех файлов проекта. | `bool` | `false` ||
|| `apply-presets` | Применять ли пресеты переменных. 

[Подробнее о пресетах](project/presets.md). | `bool` | `false` ||
|| `varsPreset` | Имя пресета переменных, который необходимо использовать при сборке. | `string` | ||
|| `needToSanitizeHtml` | Включить очистку HTML. | `bool` | `false` ||
|| `add-system-meta` | Добавлять метаданные с системными переменными из пресетов в файлы документации | `bool` | `false` ||
|| `remove-hidden-toc-items` | Убрать из оглавления все объекты, отмеченные атрибутом `hidden: true` | `bool` | `false` ||
|| `add-map-file` | Создает json-файл со всеми путями проекта | `bool` | `false` ||
|| `lint` | Подключить [файл линтера](./project/lint.md). | `bool` | `false` ||
|| `conditionsInCode` | Выполнять условия в блоках кода | `bool` | `false` ||
|| `merge-includes` | Объеденить содержимое [инклюдов](./project/includes.md) с документацией.

{% note info %}

Используйте вместе с параметром `output-format: md`.

{% endnote %} 

| `bool` | `false` ||
|| `langs` | Массив языков, участвующих в сборке. | ||
|#

## Параметры отображения в интерфейсе {#docs-viewer}

#|
|| **Название** | **Описание** | **Тип** | **Значение по умолчанию** | **Где поддерживается**||
|| `project-name` | Будет использоваться для формирования url-а проекта на сайте. Обязательно указывается в нижнем регистре. Могут быть использованы буквы, цифры, дефис и нижнее подчеркивание, остальные символы не поддерживаются. Максимальная длина — 63 символа.

{% note warning %}

1. Чтобы проверить уникальность вашего `project-name`, воспользуйтесь поиском по вхождению `project-name: <project-name>` в репозитории с установленным флагом **Ignore case**.

2. Есть три зарезервированных имени, которые нельзя указывать в качестве значения `project-name`:

    * `build`;
    * `docs-assets`;
    * `api`.

3. Для проектов на доменах dev/support2 значение `project-name` должно начинаться с префикса `dev-`/`support-`.

    Например, `project-name: support-project-name`.

{% endnote %}
| `string` | | Везде ||
|| `is-external` /  `is-new-external` |
Проект будет доступен внешним пользователям, если установлено значение параметра `true`.

Параметр `is-external` используется для проектов на yandex.ru/dev или yandex.ru/legal. Для проектов на yandex.ru/support2 используется параметр `is-new-external`.

{% note warning %}

Параметр `is-external`, используемый для выкладки внешней документации на yandex.ru/support2 и собственные домены, устарел. Для проектов с этим параметром необходима [миграция](../migrations/new-ci.md).

Для новых проектов используйте параметр `is-new-external`.

{% endnote %}

| `bool` | `true` | Внешний ||
|| `pdf` | В случае, если указано значение `pdf: true`, для документа будет собираться pdf-версия. Чтобы сборка прошла корректно обязательно должен быть указан параметр `singlePage: true`. | `bool` | `false` | Внешний ||
|| `langs` | Массив языков, отображаемых в интерфейсе документации. Язык по умолчанию при открытии страницы — первый элемент в массиве.

{% cut "Пример структуры проекта с несколькими языками" %}

```
input-folder
|-- .yfm
|-- ru
    |-- toc.yaml
    |-- index.md
|-- en
    |-- toc.yaml
    |-- index.md
```

{% endcut %}

{% note warning %}

Если структура проекта содержит языковые папки, то указывать параметр обязательно, даже если в проекте используется только один язык.

{% endnote %}

`string` | | Везде ||
|| `themes` | Отображение темной или светлой темы документации.

По умолчанию включены обе темы.

Можно отключить темную тему, указав только светлую:

```yaml
themes: ['light']
```
| `string` | `light` | Везде ||
|| `abc-slug` | Используется для отображения документации в инфра-портале [https://i.yandex-team.ru/documentation](https://i.yandex-team.ru/documentation). | `string` | | Внутренний ||
|| `no-index` | Запрет на индексирование внешними роботами.

Рекомендуется использовать параметр, пока не произошел публичный запуск, чтобы документ не отображался в поисковиках. |  `bool` | `false` Внешний ||
|| `favicon-src` | Иконка во вкладке браузера. |  |  | Внешний ||
|| `logo-options` |
Настройки логотипа:

* `src` — логотип для светлой темы;

* `src-dark` — логотип для темной темы;

* `src-mobile` — логотип для светлой темы на мобильных;

* `src-mobile-dark` — логотип для темной темы на мобильных;

* `src-preview` — логотип для превью ссылки при шеринге на внешних ресурсах;

* `url` — ссылка, на которую перенаправляет при нажатии на логотип. Можно задать шаблон ссылки с параметром `{lang}`, чтобы он заменился на текущий язык документации при переходе. Например, ссылка `https://diplodoc.com/docs/{lang}/` при переходе из русской документации будет вести на `https://diplodoc.com/docs/ru/`.

* `title` — текст, который показывается вместо логотипа, если он не задан. 

Если логотипы для темной темы не указаны, то при сборке для нее используется логотип для светлой темы.

Для указанных выше параметров можно настроить различное отображение для разных языков собираемой документации.

{% cut "Примеры" %}

Для всех языков документации будет использован один и то же логотип:

```text
src: logo
```
Для разных языков документации будут использованы разные логотипы:

```text
src:
  ru: logo1
  en: logo2
  default: logo3
```
{% endcut %}

* `title` — текст, который можно задать вместо логотипа; |  |  | Внешний ||
|| `index-page` | Настройка отображения карточки проекта на разводящей. |  |  | Внутренний ||
|| `startrek` | Настройка отправки баг-репортов на контент документации. |  |  | Внутренний ||
|| `feedback` | Настройка рассылки о лайках, дизлайках, комментариях. |  |  | Внутренний ||
|| `crawler` | Отчет о нерабочих ссылках на почту. |  |  | Внутренний ||
|| `support-widget` | Виджет Яндекс Мессенджера с чатом поддержки. |  |  | Внешний ||
|| `github-url-prefix` | Github префикс до директории корня документации (если она хранится на Github).

Если значение не задано, то для внешних пользователей не будет указана ссылка на редактирование страницы. | | | Везде ||
|| `disableLiquid` | Отключить использование переменных | `bool` | `false` | Везде ||
|| `supportGithubAnchors` | Генерировать дополнительные [якоря](./syntax/base.md#headers), совместимые с GitHub | `bool` | `false` | Везде ||
|| `linkify` | Преобразовывать ссылкоподобные строки в ссылки  | `bool` | `false` | Внешний ||
|| `linkifyTlds` | Настройка tld для плагина linkify | `string \| string[]` | `undefined` | Внешний ||
|| `lang` | Язык локализации дефолтных текстов. 
Для [следующих языков](https://github.com/diplodoc-platform/client/blob/34a5139620874627cfdebe9be74902cf9d3961b1/src/constants.ts#L15) контент будет отображаться в формате RTL (right-to-left) | `string` | `ru` | Везде ||
|| `metrika` | Использовать счётчик Яндекс.Метрики с заданным id.

Можно подключить несколько счетчиков:

```yaml
docs-viewer:
  metrika: [21930706, 96924079, 96924106]
```
| `string \| string[]` | `undefined` | Везде ||
|| `output-format` | Формат файлов итоговой сборки | `string` (`html` или `md`) | `html` | Везде ||
|| `sanitizeOptions` | Конфигурация санитайзера | `Object` | `undefined` | Везде ||
|| `analytics` | Конфигурация для модуля аналитки | `Object` | `undefined` | Везде ||
|| `analytics.gtm` | Настройки Google Tag Manager аналитики | `Object` | `undefined`| Везде ||
|| `analytics.gtm.id` | Идентификатор Google Tag Manager в формате GTM | `string` | `undefined` | Везде  ||
|| `analytics.gtm.mode` | Тип уведомления перед отправкой событий `base` или `notification` | `string` | `base` |Везде ||
|#

## Ресурсы {#resources}

#|
||
`allow-custom-resources`

`static-content`

`resource`

`resources <value...>`
| Разрешить загрузку ресурсов в статически сгенерированные страницы | `bool` | `false` | Везде ||
|| `csp` | Управление [Content Security Policy](./guides/csp.md) (CSP) | `string` | - | Везде ||
|#
